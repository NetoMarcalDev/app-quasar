import{K as y,r as B,L as I,M as q,N as D}from"./index.5b155391.js";import{u as R}from"./use-quasar.b8b4cd8b.js";let l;const V=new Uint8Array(16);function S(){if(!l&&(l=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!l))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return l(V)}const c=[];for(let r=0;r<256;++r)c.push((r+256).toString(16).slice(1));function A(r,t=0){return c[r[t+0]]+c[r[t+1]]+c[r[t+2]]+c[r[t+3]]+"-"+c[r[t+4]]+c[r[t+5]]+"-"+c[r[t+6]]+c[r[t+7]]+"-"+c[r[t+8]]+c[r[t+9]]+"-"+c[r[t+10]]+c[r[t+11]]+c[r[t+12]]+c[r[t+13]]+c[r[t+14]]+c[r[t+15]]}const C=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var g={randomUUID:C};function P(r,t,s){if(g.randomUUID&&!t&&!r)return g.randomUUID();r=r||{};const i=r.random||(r.rng||S)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){s=s||0;for(let u=0;u<16;++u)t[s+u]=i[u];return t}return A(i)}function k(){return{setBrand:(t,s)=>{t&&y("primary",t),s&&y("secondary",s)}}}const d=B({primary_color:"",secondary_color:"",name:"",phone:"",parallax_url:""});function H(){const{supabase:r}=D(),{user:t}=I(),s=q(),{setBrand:i}=k(),u=R(),h=async a=>{const{data:o,error:e}=await r.from(a).select("*");if(e)throw e;return o},w=async(a,o,e="",n="")=>{const{data:m,error:p}=await r.from(a).select("*").eq("user_id",o).eq(e,n);if(p)throw p;return m},U=async(a,o)=>{const{data:e,error:n}=await r.from(a).select("*").eq("id",o);if(n)throw n;return e[0]},b=async(a,o)=>{const{data:e,error:n}=await r.from(a).insert([{...o,user_id:t.value.id}]);if(n)throw n;return e},v=async(a,o)=>{const{data:e,error:n}=await r.from(a).update({...o}).match({id:o.id});if(n)throw n;return e},f=async(a,o)=>{const{data:e,error:n}=await r.from(a).delete().match({id:o});if(n)throw n;return e},x=async(a,o)=>{const e=P(),{error:n}=r.storage.from(o).upload(e,a,{cacheControl:"3600",upsert:!1}),m=await _(e,o);if(n)throw n;return m},_=async(a,o)=>{const{data:e,error:n}=r.storage.from(o).getPublicUrl(a);if(n)throw n;return e.publicUrl};return{list:h,listPublic:w,getById:U,post:b,update:v,remove:f,uploadImg:x,getBrand:async()=>{var o;const a=s.params.id||((o=t==null?void 0:t.value)==null?void 0:o.id);if(a){u.loading.show({backgroundColor:"dark"});const{data:e,error:n}=await r.from("config").select("*").eq("user_id",a);if(n)throw n;return e.length>0&&(d.value=e[0],i(d.value.primary_color,d.value.secondary_color)),u.loading.hide(),d}},brand:d}}export{k as a,H as u};
