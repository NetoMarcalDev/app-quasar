import{b1 as E,b3 as N,_ as U,d as B,r as k,L as R,Q as V,o as A,l as u,aj as x,f as t,n as s,V as l,m as f,ae as v,R as w,bs as b,p as g}from"./index.5b155391.js";import{a as S,Q as j}from"./QTable.5462feae.js";import{Q as z,a as C}from"./QPageSticky.825fe504.js";import{Q as _}from"./QTooltip.12d7c120.js";import{u as D}from"./UseApi.8087e7d0.js";import{u as F}from"./UseNotify.ed29e0c6.js";import{u as G}from"./use-quasar.b8b4cd8b.js";import{c as H,o as M}from"./open-url.b54082d9.js";import"./QList.168fe894.js";import"./use-fullscreen.cc57e7b4.js";import"./QMenu.a6c2adc9.js";import"./format.3713b029.js";import"./rtl.b51694b1.js";function O(o){const e=document.createElement("textarea");e.value=o,e.contentEditable="true",e.style.position="fixed";const n=()=>{};E(n),document.body.appendChild(e),e.focus(),e.select();const i=document.execCommand("copy");return e.remove(),N(n),i}function I(o){return navigator.clipboard!==void 0?navigator.clipboard.writeText(o):new Promise((e,n)=>{const i=O(o);i?e(!0):n(i)})}const J=B({name:"ProductList",setup(){const o=k([]),e=k(!0),{listPublic:n,remove:i}=D(),{user:m}=R(),{notifyError:p,notifySuccess:r}=F(),c=V(),y="product",P=G(),h=async()=>{try{e.value=!0,o.value=await n(y,m.value.id),e.value=!1}catch(a){e.value=!1,p(a.message)}},Q=a=>{c.push({name:"form-produto",params:{id:a.id}})},$=async a=>{try{P.dialog({title:"Confirme",message:`Deseja excluir ${a.name} ?`,cancel:!0,persistent:!0}).onOk(async()=>{await i(y,a.id),r("Produto removido com sucesso."),h()})}catch(d){p(d.message)}},L=()=>{const a=m.value.id,d=c.resolve({name:"produtos",params:{id:a}});M(window.origin+d.href)},T=()=>{const a=m.value.id,d=c.resolve({name:"produtos",params:{id:a}}),q=window.origin+d.href;I(q).then(()=>{r("Link copiado com sucesso!")}).catch(()=>{p("N\xE3o foi poss\xEDvel compiar o link.")})};return A(()=>{h()}),{columnsProduct:H,products:o,loading:e,handleEdit:Q,handleRemoveProduct:$,handleGoToHistore:L,handleCopyPublicUrl:T}}}),K={class:"q-pa-md"},W=w("span",{class:"text-h6"}," Produto ",-1),X=["src"];function Y(o,e,n,i,m,p){return u(),x("div",K,[t(S,{rows:o.products,columns:o.columnsProduct,"row-key":"id",loading:o.loading},{top:s(()=>[W,t(l,{label:"Listar",dense:"",size:"sm",outline:"",class:"q-ml-sm",icon:"mdi-store",color:"primary",onClick:o.handleGoToHistore},null,8,["onClick"]),t(l,{label:"Copiar link",dense:"",size:"sm",outline:"",class:"q-ml-sm",icon:"mdi-content-copy",color:"primary",onClick:o.handleCopyPublicUrl},null,8,["onClick"]),t(j),o.$q.platform.is.desktop?(u(),f(l,{key:0,label:"Adiconar",color:"primary",icon:"mdi-plus",dense:"",to:{name:"form-produto"}})):v("",!0)]),"body-cell-img_url":s(r=>[t(C,{props:r},{default:s(()=>[r.row.img_url?(u(),f(b,{key:0},{default:s(()=>[w("img",{src:r.row.img_url},null,8,X)]),_:2},1024)):(u(),f(b,{key:1,color:"grey","text-color":"white",icon:"mdi-image-off"}))]),_:2},1032,["props"])]),"body-cell-actions":s(r=>[t(C,{props:r,class:"q-gutter-sm"},{default:s(()=>[t(l,{icon:"mdi-pencil-outline",color:"secondary",dense:"",onClick:c=>o.handleEdit(r.row)},{default:s(()=>[t(_,null,{default:s(()=>[g(" Editar ")]),_:1})]),_:2},1032,["onClick"]),t(l,{icon:"mdi-delete-outline",color:"negative",dense:"",onClick:c=>o.handleRemoveProduct(r.row)},{default:s(()=>[t(_,null,{default:s(()=>[g(" Deletar ")]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"]),t(z,{position:"bottom-right",offset:[18,18]},{default:s(()=>[o.$q.platform.is.mobile?(u(),f(l,{key:0,fab:"",icon:"mdi-plus",color:"primary",to:{name:"form-produto"}})):v("",!0)]),_:1})])}var po=U(J,[["render",Y]]);export{po as default};
