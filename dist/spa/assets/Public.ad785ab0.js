import{Q as ve}from"./use-fullscreen.cc57e7b4.js";import{Q as fe,a as he}from"./QTable.5462feae.js";import{c as s,q as X,r as f,w as U,v as ne,h as b,a3 as be,s as ie,a4 as ye,o as oe,a5 as Z,a6 as ee,B as Se,C as pe,a7 as we,a8 as Ce,a9 as Pe,aa as te,ab as ke,ac as _e,S as re,g as $e,V as G,d as ue,_ as se,l as E,m as H,n as C,f as h,ad as A,ae as W,R as k,a2 as I,af as Be,ag as De,ah as de,ai as Te,M as Ve,k as qe,aj as ae,p as Ne,U as Le}from"./index.5b155391.js";import{b as Qe}from"./format.3713b029.js";import{Q as xe}from"./QPage.ce3ac282.js";import{u as ce}from"./UseApi.8087e7d0.js";import{u as Fe}from"./UseNotify.ed29e0c6.js";import{f as J,o as Ie,c as Ee,i as le}from"./open-url.b54082d9.js";import{C as Me}from"./ClosePopup.e6b5ad83.js";import"./QMenu.a6c2adc9.js";import"./rtl.b51694b1.js";import"./QList.168fe894.js";import"./use-quasar.b8b4cd8b.js";const ze={ratio:[String,Number]};function Oe(e,t){return s(()=>{const c=Number(e.ratio||(t!==void 0?t.value:void 0));return isNaN(c)!==!0&&c>0?{paddingBottom:`${100/c}%`}:null})}const Re=16/9;var ge=X({name:"QImg",props:{...ze,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Re},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:t,emit:c}){const d=f(e.initialRatio),g=Oe(e,d);let a=null,i=!1;const l=[f(null),f(v())],u=f(0),_=f(!1),m=f(!1),w=s(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),y=s(()=>({width:e.width,height:e.height})),P=s(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),S=s(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));U(()=>$(),B);function $(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function v(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function B(n){a!==null&&(clearTimeout(a),a=null),m.value=!1,n===null?(_.value=!1,l[u.value^1].value=v()):_.value=!0,l[u.value].value=n}function D({target:n}){i!==!0&&(a!==null&&(clearTimeout(a),a=null),d.value=n.naturalHeight===0?.5:n.naturalWidth/n.naturalHeight,p(n,1))}function p(n,Q){i===!0||Q===1e3||(n.complete===!0?T(n):a=setTimeout(()=>{a=null,p(n,Q+1)},50))}function T(n){i!==!0&&(u.value=u.value^1,l[u.value].value=null,_.value=!1,m.value=!1,c("load",n.currentSrc||n.src))}function N(n){a!==null&&(clearTimeout(a),a=null),_.value=!1,m.value=!0,l[u.value].value=null,l[u.value^1].value=v(),c("error",n)}function L(n){const Q=l[n].value,F={key:"img_"+n,class:P.value,style:S.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...Q};return u.value===n?(F.class+=" q-img__image--waiting",Object.assign(F,{onLoad:D,onError:N})):F.class+=" q-img__image--loaded",b("div",{class:"q-img__container absolute-full",key:"img"+n},b("img",F))}function M(){return _.value!==!0?b("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},ie(t[m.value===!0?"error":"default"])):b("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},t.loading!==void 0?t.loading():e.noSpinner===!0?void 0:[b(ye,{color:e.spinnerColor,size:e.spinnerSize})])}return B($()),ne(()=>{i=!0,a!==null&&(clearTimeout(a),a=null)}),()=>{const n=[];return g.value!==null&&n.push(b("div",{key:"filler",style:g.value})),m.value!==!0&&(l[0].value!==null&&n.push(L(0)),l[1].value!==null&&n.push(L(1))),n.push(b(be,{name:"q-transition--fade"},M)),b("div",{class:w.value,style:y.value,role:"img","aria-label":e.alt},n)}}});function K(e){let t=!1,c,d;function g(){d=arguments,t!==!0&&(t=!0,c=requestAnimationFrame(()=>{e.apply(this,d),d=void 0,t=!1}))}return g.cancel=()=>{window.cancelAnimationFrame(c),t=!1},g}const{passive:R}=pe;var je=X({name:"QParallax",props:{src:String,height:{type:Number,default:500},speed:{type:Number,default:1,validator:e=>e>=0&&e<=1},scrollTarget:{default:void 0},onScroll:Function},setup(e,{slots:t,emit:c}){const d=f(0),g=f(null),a=f(null),i=f(null);let l,u,_,m,w,y;U(()=>e.height,()=>{l===!0&&S()}),U(()=>e.scrollTarget,()=>{l===!0&&(D(),B())});let P=p=>{d.value=p,e.onScroll!==void 0&&c("scroll",p)};function S(){let p,T,N;y===window?(p=0,N=T=window.innerHeight):(p=Z(y).top,T=ee(y),N=p+T);const L=Z(g.value).top,M=L+e.height;if(w!==void 0||M>p&&L<N){const n=(N-L)/(e.height+T);$((_-e.height)*n*e.speed),P(n)}}let $=p=>{u.style.transform=`translate3d(-50%,${Math.round(p)}px,0)`};function v(){_=u.naturalHeight||u.videoHeight||ee(u),l===!0&&S()}function B(){l=!0,y=Se(g.value,e.scrollTarget),y.addEventListener("scroll",S,R),window.addEventListener("resize",m,R),S()}function D(){l===!0&&(l=!1,y.removeEventListener("scroll",S,R),window.removeEventListener("resize",m,R),y=void 0,$.cancel(),P.cancel(),m.cancel())}return oe(()=>{$=K($),P=K(P),m=K(v),u=t.media!==void 0?a.value.children[0]:i.value,u.onload=u.onloadstart=u.loadedmetadata=v,v(),u.style.display="initial",window.IntersectionObserver!==void 0?(w=new IntersectionObserver(p=>{(p[0].isIntersecting===!0?B:D)()}),w.observe(g.value)):B()}),ne(()=>{D(),w!==void 0&&w.disconnect(),u.onload=u.onloadstart=u.loadedmetadata=null}),()=>b("div",{ref:g,class:"q-parallax",style:{height:`${e.height}px`}},[b("div",{ref:a,class:"q-parallax__media absolute-full"},t.media!==void 0?t.media():[b("img",{ref:i,src:e.src})]),b("div",{class:"q-parallax__content absolute-full column flex-center"},t.content!==void 0?t.content({percentScrolled:d.value}):ie(t.default))])}});function j(e,t){return[!0,!1].includes(e)?e:t}var He=X({name:"QPagination",props:{...we,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>(typeof e=="string"?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>e===""||Ce.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(e,{emit:t}){const{proxy:c}=$e(),{$q:d}=c,g=Pe(e,d),a=s(()=>parseInt(e.min,10)),i=s(()=>parseInt(e.max,10)),l=s(()=>parseInt(e.maxPages,10)),u=s(()=>S.value+" / "+i.value),_=s(()=>j(e.boundaryLinks,e.input)),m=s(()=>j(e.boundaryNumbers,!e.input)),w=s(()=>j(e.directionLinks,e.input)),y=s(()=>j(e.ellipses,!e.input)),P=f(null),S=s({get:()=>e.modelValue,set:o=>{if(o=parseInt(o,10),e.disable||isNaN(o))return;const r=Qe(o,a.value,i.value);e.modelValue!==r&&t("update:modelValue",r)}});U(()=>`${a.value}|${i.value}`,()=>{S.value=e.modelValue});const $=s(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),v=s(()=>e.gutter in te?`${te[e.gutter]}px`:e.gutter||null),B=s(()=>v.value!==null?`--q-pagination-gutter-parent:-${v.value};--q-pagination-gutter-child:${v.value}`:null),D=s(()=>{const o=[e.iconFirst||d.iconSet.pagination.first,e.iconPrev||d.iconSet.pagination.prev,e.iconNext||d.iconSet.pagination.next,e.iconLast||d.iconSet.pagination.last];return d.lang.rtl===!0?o.reverse():o}),p=s(()=>({"aria-disabled":e.disable===!0?"true":"false",role:"navigation"})),T=s(()=>ke(e,"flat")),N=s(()=>({[T.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),L=s(()=>{const o={[T.value]:!1};return e.activeDesign!==""&&(o[e.activeDesign]=!0),o}),M=s(()=>({...L.value,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})),n=s(()=>{let o=Math.max(l.value,1+(y.value?2:0)+(m.value?2:0));const r={pgFrom:a.value,pgTo:i.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(i.value).length)}em`}};return l.value&&o<i.value-a.value+1&&(o=1+Math.floor(o/2)*2,r.pgFrom=Math.max(a.value,Math.min(i.value-o+1,e.modelValue-Math.floor(o/2))),r.pgTo=Math.min(i.value,r.pgFrom+o-1),m.value&&(r.boundaryStart=!0,r.pgFrom++),y.value&&r.pgFrom>a.value+(m.value?1:0)&&(r.ellipsesStart=!0,r.pgFrom++),m.value&&(r.boundaryEnd=!0,r.pgTo--),y.value&&r.pgTo<i.value-(m.value?1:0)&&(r.ellipsesEnd=!0,r.pgTo--)),r});function Q(o){S.value=o}function F(o){S.value=S.value+o}const me=s(()=>{function o(){S.value=P.value,P.value=null}return{"onUpdate:modelValue":r=>{P.value=r},onKeyup:r=>{_e(r,13)===!0&&o()},onBlur:o}});function q(o,r,z){const x={"aria-label":r,"aria-current":"false",...N.value,...o};return z===!0&&Object.assign(x,{"aria-current":"true",...M.value}),r!==void 0&&(e.toFn!==void 0?x.to=e.toFn(r):x.onClick=()=>{Q(r)}),b(G,x)}return Object.assign(c,{set:Q,setByOffset:F}),()=>{const o=[],r=[];let z;if(_.value===!0&&(o.push(q({key:"bls",disable:e.disable||e.modelValue<=a.value,icon:D.value[0]},a.value)),r.unshift(q({key:"ble",disable:e.disable||e.modelValue>=i.value,icon:D.value[3]},i.value))),w.value===!0&&(o.push(q({key:"bdp",disable:e.disable||e.modelValue<=a.value,icon:D.value[1]},e.modelValue-1)),r.unshift(q({key:"bdn",disable:e.disable||e.modelValue>=i.value,icon:D.value[2]},e.modelValue+1))),e.input!==!0){z=[];const{pgFrom:x,pgTo:Y,marginalStyle:O}=n.value;if(n.value.boundaryStart===!0){const V=a.value===e.modelValue;o.push(q({key:"bns",style:O,disable:e.disable,label:a.value},a.value,V))}if(n.value.boundaryEnd===!0){const V=i.value===e.modelValue;r.unshift(q({key:"bne",style:O,disable:e.disable,label:i.value},i.value,V))}n.value.ellipsesStart===!0&&o.push(q({key:"bes",style:O,disable:e.disable,label:"\u2026",ripple:!1},x-1)),n.value.ellipsesEnd===!0&&r.unshift(q({key:"bee",style:O,disable:e.disable,label:"\u2026",ripple:!1},Y+1));for(let V=x;V<=Y;V++)z.push(q({key:`bpg${V}`,style:O,disable:e.disable,label:V},V,V===e.modelValue))}return b("div",{class:$.value,...p.value},[b("div",{class:"q-pagination__content row no-wrap items-center",style:B.value},[...o,e.input===!0?b(re,{class:"inline",style:{width:`${u.value.length/1.5}em`},type:"number",dense:!0,value:P.value,disable:e.disable,dark:g.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:u.value,min:a.value,max:i.value,...me.value}):b("div",{class:"q-pagination__middle row justify-center"},z),...r])])}}});const Ae=ue({name:"DialogProductDetails",props:{show:{type:Boolean,required:!0},product:{type:Object}},setup(e,{emit:t}){const{brand:c}=ce(),d="Ol\xE1, fiquei interessado no produto";return{formatCurrency:J,handleClose:()=>{t("hideDialog")},handleSendWhatsApp:()=>{const i=encodeURI(`https://api.whatsapp.com/send?phone=5585${c.value.phone}&text=${d} - ${e.product.name} - ${J(e.product.price)}`);Ie(i)},brand:c}}}),Ue=k("div",{class:"text-h6"},"Detalhes",-1),We={class:"text-h6"},Ke={class:"text-subtitle2"},Ge=["innerHTML"];function Je(e,t,c,d,g,a){return E(),H(Te,{"full-width":e.$q.platform.is.mobile,"model-value":e.show,onBeforeHide:e.handleClose},{default:C(()=>[h(de,null,{default:C(()=>[h(A,null,{default:C(()=>[Ue]),_:1}),e.product.img_url?(E(),H(A,{key:0},{default:C(()=>[h(ge,{src:e.product.img_url,ratio:4/3,style:{"min-width":"300px"}},null,8,["src"])]),_:1})):W("",!0),h(A,null,{default:C(()=>[k("div",We,I(e.product.name),1),k("div",Ke,I(e.formatCurrency(e.product.price)),1),k("div",{class:"text-body2",innerHTML:e.product.description},null,8,Ge)]),_:1}),h(Be,{align:"right"},{default:C(()=>[De(h(G,{label:"Cancel",color:"primary",outline:""},null,512),[[Me]]),e.brand.phone?(E(),H(G,{key:0,label:"Fazer pedido",icon:"mdi-whatsapp",color:"green-7",onClick:e.handleSendWhatsApp},null,8,["onClick"])):W("",!0)]),_:1})]),_:1})]),_:1},8,["full-width","model-value","onBeforeHide"])}var Xe=se(Ae,[["render",Je]]);const Ye=ue({name:"ProductListPublic",components:{DialogProductDetails:Xe},setup(){const e=f([]),t=f(!0),c=f(""),d="product",g=f(!1),a=f({}),i=f(""),l=f([]),{listPublic:u,brand:_}=ce(),{notifyError:m}=Fe(),w=Ve(),y=async v=>{try{t.value=!0,e.value=i.value?await u(d,v,"category_id",i.value):await u(d,v),t.value=!1}catch(B){t.value=!1,m(B.message)}},P=v=>{a.value=v,g.value=!0},S=async v=>{l.value=await u("category",v)},$=()=>{window.scrollTo({top:0,behavior:"smooth"})};return oe(()=>{w.params.id&&(S(w.params.id),y(w.params.id))}),{columnsProduct:Ee,products:e,loading:t,filter:c,formatCurrency:J,showDialogDetails:g,productDetails:a,handleShowDetails:P,brand:_,categoryId:i,optionsCategories:l,handleListProducts:y,route:w,initialPagination:le,handleScrollToTop:$,pagesNumber:s(()=>Math.ceil(e.value.length/le.value.rowsPerPage))}}}),Ze={key:0,class:"row"},et={class:"col-12 text-center text-h4"},tt={class:"q-pa-md"},at=k("span",{class:"text-h6"}," Produtos ",-1),lt={class:"q-pa-xs col-xs-12 col-sm-6 col-md-3"},nt={class:"text-h6"},it={class:"text-subtitle2"},ot={key:0,class:"col-12"},rt=["src"],ut={class:"text-white"},st={class:"row justify-center"};function dt(e,t,c,d,g,a){const i=qe("dialog-product-details");return E(),H(xe,{padding:""},{default:C(()=>[e.brand.name?(E(),ae("div",Ze,[k("div",et,[Ne(I(e.brand.name)+" ",1),h(ve,{outlined:"",modelValue:e.categoryId,"onUpdate:modelValue":[t[0]||(t[0]=l=>e.categoryId=l),t[1]||(t[1]=l=>e.handleListProducts(e.route.params.id))],label:"Categoria",options:e.optionsCategories,"option-label":"name","option-value":"id","map-options":"","emit-value":"",clearable:"",dense:""},null,8,["modelValue","options"])])])):W("",!0),k("div",tt,[h(he,{grid:"",rows:e.products,columns:e.columnsProduct,pagination:e.initialPagination,"onUpdate:pagination":t[3]||(t[3]=l=>e.initialPagination=l),"row-key":"id",loading:e.loading,filter:e.filter,"hide-pagination":""},{top:C(()=>[at,h(fe),h(re,{outlined:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":t[2]||(t[2]=l=>e.filter=l),placeholder:"Consultar",class:"q-mr-sm"},{append:C(()=>[h(Le,{name:"mdi-magnify"})]),_:1},8,["modelValue"])]),item:C(l=>[k("div",lt,[h(de,{flat:"",bordered:"",class:"cursor-pointer",onClick:u=>e.handleShowDetails(l.row)},{default:C(()=>[h(ge,{src:l.row.img_url,ratio:4/3},null,8,["src"]),h(A,{class:"text-center"},{default:C(()=>[k("div",nt,I(l.row.name),1),k("div",it,I(e.formatCurrency(l.row.price)),1)]),_:2},1024)]),_:2},1032,["onClick"])]),l.rowIndex===3&&e.brand.parallax_url?(E(),ae("div",ot,[h(je,{height:200,speed:.5},{media:C(()=>[k("img",{src:e.brand.parallax_url},null,8,rt)]),default:C(()=>[k("h1",ut,I(e.brand.name),1)]),_:1})])):W("",!0)]),_:1},8,["rows","columns","pagination","loading","filter"]),k("div",st,[h(He,{modelValue:e.initialPagination.page,"onUpdate:modelValue":[t[4]||(t[4]=l=>e.initialPagination.page=l),e.handleScrollToTop],max:e.pagesNumber,"direction-links":""},null,8,["modelValue","max","onUpdate:modelValue"])])]),h(i,{show:e.showDialogDetails,product:e.productDetails,onHideDialog:t[5]||(t[5]=l=>e.showDialogDetails=!1)},null,8,["show","product"])]),_:1})}var kt=se(Ye,[["render",dt]]);export{kt as default};
